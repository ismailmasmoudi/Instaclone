let posts = [{
    'author': 'Tagesschau',
    'logos': './logo1.png',
    'images': './post1.jpg',
    'description': 'Football is a family of team sports that involve, to varying degrees, kicking a ball to score a goal. Unqualified, the word football normally means the form of football that is the most popular where the word is used. Sports commonly called football include association football (known as soccer in Australia, Canada, South Africa, the United States,',
    'location': 'London, United Kingdom',
    'days': '• 1 Std •',
    "isLiked": true, // // True, wenn der Post bereits von dir geliked wurde
    "likes": 0,
    "comments": ['Kommentar für Post 0', 'Kommentar 2 für Post 0']

},
{
    'author': 'Cafee',
    'logos': './logo2.jpg',
    'images': './post2.jpg',
    'description': 'Visiting a nice café, especially during the weekends, is one of my favourite things to do. Thankfully, there are plenty of cafes in my old town to help me do that, and today, I will talk about one of those cafes here',
    'location': 'Liverpool, United Kingdom',
    'days': '• 17 Std •',
    "isLiked": false,
    "likes": 5,
    "comments": ['Kommentar für Post 1', 'Kommentar 2 für Post 1']
},
{
    'author': 'Books.22',
    'logos': './logo3.jpg',
    'images': './post3.jpg',
    'description': 'People say that if we read books, it will make us smart, and if we read too much of it, we will become “bookworm”. Not sure, if I am smart or a bookworm, but I do love to read books once in a while if they are a good read. Today, I would like to talk about one such book called “The Alchemist”, a novel, written by a Brazilian writer named “Paulo Coelho”. "The Alchemist", is said by many, continues to change the lives of its readers forever. This book has established itself as a modern classic, universally admired and loved by people.',
    'location': 'Madrid, Spain',
    'days': '• 20 Std •',
    "isLiked": true,
    "likes": 199,
    "comments": ['Kommentar für Post 2', 'Kommentar 2 für Post 2']
},
{
    'author': 'Xbox players',
    'logos': './logo5.jpg',
    'images': './post4.jpg',
    'description': 'Always forgive your enemies; nothing annoys them so much.',
    'location': 'Madrid, Spain',
    'days': '• 1 Tag •',
    "isLiked": true,
    "likes": 1001,
    "comments": ['Kommentar für Post 3', 'Kommentar 2 für Post 3']
},
{
    'author': 'Ikea ',
    'logos': './logo6.jpg',
    'images': './post5.jpg',
    'description': 'If you tell the truth, you dont have to remember anything.',
    'location': 'Madrid, Spain',
    'days': '• 2 Tage •',
    "isLiked": true,
    "likes": 456,
    "comments": ['Kommentar für Post 4', 'Kommentar 2 für Post 4']
},
{
    'author': 'Dz lovers',
    'logos': './logo8.jpg',
    'images': './post6.jpg',
    'description': 'Be the change that you wish to see in the world. ',
    'location': 'Madrid, Spain',
    'days': '• 6 Tage •',
    "isLiked": false,
    "likes": 888,
    "comments": ['Kommentar für Post 5', 'Kommentar 2 für Post 5']
},
{
    'author': 'Madrid Fans',
    'logos': './logo7.jpg',
    'images': './post7.jpg',
    'description': 'People say that if we read books, it will make us smart, and if we read too much of it, we will become “bookworm”. Not sure, if I am smart or a bookworm, but I do love to read books once in a while if they are a good read. Today, I would like to talk about one such book called “The Alchemist”, a novel, written by a Brazilian writer named “Paulo Coelho”. "The Alchemist", is said by many, continues to change the lives of its readers forever. This book has established itself as a modern classic, universally admired and loved by people.',
    'location': 'Madrid, Spain',
    'days': '• 1 Woche •',
    "isLiked": false,
    "likes": 565,
    "comments": ['Kommentar für Post 6', 'Kommentar 2 für Post 6']
},
{
    'author': 'Bob Marly',
    'logos': './logo9.jpg',
    'images': './post8.jpg',
    'description': 'Be yourself; everyone else is already taken',
    'location': 'Los Angeles, USA',
    'days': '•  9 Tage •',
    "isLiked": true,
    "likes": 981,
    "comments": ['Kommentar für Post 7', 'Kommentar 2 für Post 7']
},
{
    'author': 'Hoha.22',
    'logos': './logo10.jpg',
    'images': './post9.jpg',
    'description': 'Two things are infinite: the universe and human stupidity and Im not sure about the universe.',
    'location': 'Barcelona, Spain',
    'days': '• 10 Tage •',
    "isLiked": false,
    "likes": 277,
    "comments": ['Kommentar für Post 8', 'Kommentar 2 für Post 8']
},
{
    'author': 'New Games',
    'logos': './logo3.jpg',
    'images': './post3.jpg',
    'description': 'You have gotta dance like there has nobody watching  Love like youll never be hurt Sing like theres nobody listening  And live like its heaven on earth.',
    'location': 'Granada, Spain',
    'days': '• 2 Wochen •',
    "isLiked": true,
    "likes": 22,
    "comments": ['Kommentar für Post 9', 'Kommentar 2 für Post 9']
}
];


let storys = [{
    'storypics': './logo4.jpg',
    'storyauthor': 'halona.22'
},
{
    'storypics': './logo5.jpg',
    'storyauthor': 'autowelt'
},
{
    'storypics': './logo1.png',
    'storyauthor': 'Tagesschau'
},
{
    'storypics': './logo13.jpg',
    'storyauthor': 'love.ever'
},
{
    'storypics': './logo3.jpg',
    'storyauthor': 'Book.22'
},
{
    'storypics': './logo6.jpg',
    'storyauthor': 'De.motors'
},
{
    'storypics': './logo7.jpg',
    'storyauthor': 'Animals'
},
{
    'storypics': './logo8.jpg',
    'storyauthor': 'jajo2656'
},
{
    'storypics': './post5.jpg',
    'storyauthor': 'kimo60'
},
{
    'storypics': './post4.jpg',
    'storyauthor': 'Müller44'
},
{
    'storypics': './post3.jpg',
    'storyauthor': 'workspaces'
},
{
    'storypics': './post6.jpg',
    'storyauthor': 'famous.news'
},
{
    'storypics': './post7.jpg',
    'storyauthor': 'bob fans'
},
{
    'storypics': './post2.jpg',
    'storyauthor': 'pop.rock'
},
{
    'storypics': './post8.jpg',
    'storyauthor': 'musik.forever'
},
{
    'storypics': './post9.jpg',
    'storyauthor': 'nini65'
}
];

let propositions = [{
    'profilpic': './logo14.jpg',
    'author': 'Tomennn256'
},
{
    'profilpic': './logo9.jpg',
    'author': 'fflapetinee692'
},
{
    'profilpic': './logo10.jpg',
    'author': 'beast55'
},
{
    'profilpic': './logo11.jpg',
    'author': 'daniel47'
},
{
    'profilpic': './logo12.jpg',
    'author': 'oly.new22'
}];

// displays all arrays in body 
function render() {
    let content = document.getElementById('content');
    content.innerHTML = '';
    renderStorys();
    for (i = 0; i < posts.length; i++) {
        let content = document.getElementById('content');
        content.innerHTML += htmlCodeRenderPosts(i);
        renderComment();
        renderLikes();
        renderpropositions();
        PostCommentActiv(i);
        enterKeyCommentPost (i);
    }
}

function htmlCodeRenderPosts(i) {
    let post = posts[i];
    let postAuthor = post['author'];
    let postimages = post['images'];
    let postDescription = post['description'];
    let postLocation = post['location'];
    let postLogos = post['logos'];
    let postDays = post['days'];
    return /*html*/`
    <div class="posts">

    <div class="card-post" id="card-post${i}" >

        <div class="logo-author-description-container">
            <div class="left-side">
                <div class="lad-left"><a ><img  class="logo-image" src="${postLogos}" ></a>  </div>
                
                <div class="lad-right"> 
                    <div class="card-author"> <a ><h3>${postAuthor}</h3></a> <p class="post-datum">${postDays}</p>  </div>
                    <div class="card-location">  <p>${postLocation}</p> </div>
                </div>
            </div> 
            <div class="right-side">
                
            <div class="close-button"> <a  onclick="deletePost(${i})"> <img  class="close-img" src="./close.png" alt=""></a></div>
            </div></div>
        <div class="images-description-container">

                <div class="card-images">  <img class="post-image" src="${postimages}" > </div>
                <div class="like-conatiner">
            <div class="links-buttons">
            <div  id="like-icon${i}" > <a><img  class="like-icons" src="./like-white.png" alt="like-icon" ></a></div>
            <div><a  href="#inputComment${i}">    <img class="like-icons" src="./comment-white.png" alt="comment-icon"></a></div>
            <div><a  >   <img class="like-icons" src="./share.png" alt="share-icon"> </a></div>
            </div>
        <div class="save-button" id="save-button${i}">
            
            <a onclick="saveChangeButton(${i})" >   <img class="like-icons-save" src="./save-white.png" alt="save-icon"> </a>
        
        </div>
        
    </div>
    <div class="card-description" id="likeContaier${i}"></div>
                <div class="card-description"> 
                <p class="card-description-author"> <a  ><b>${postAuthor} </b> </a> ${postDescription}</p>
                </div>
                <div class="card-comments"> 
                    <div id="comment${i}"></div>
                </div>
                <div class="input-comment"><input class="input-comment-field" id="inputComment${i}" onkeyup="PostCommentActiv(${i})" type="text" placeholder="Kommentieren...."> <a onclick="addComment(${i})" id="posten-button${i}" class="share-anker" >Posten</a></div>
            </div>
        </div>
    </div>
`
}
// displays storys arrays in body 
function renderStorys() {
    let Storyscontent = document.getElementById('story-content');
    Storyscontent.innerHTML = '';
    for (i = 0; i < storys.length; i++) {
        let story = storys[i];
        let storypic = story['storypics'];
        let storyauthor = story['storyauthor'];
        Storyscontent.innerHTML +=/*html*/`
<div class="story-card">
<div class="gradient-story-image"><a ><img  class="story-image" src="${storypic}" ></a></div> 
<a ><p>${storyauthor}</p></a>
</div>
        ` }
}

// displays propositions arrays in body 
function renderpropositions() {
    let propositionsContent = document.getElementById('propositions-friends');
    propositionsContent.innerHTML = '';
    for (f = 0; f < propositions.length; f++) {
        propositionsContent.innerHTML +=/*html*/ htmlCodeRenderProposition(f);
    }
}

function htmlCodeRenderProposition(f) {
    let story = propositions[f];
    let propoPic = story['profilpic'];
    let propoAuthor = story['author'];
    return `
        <div class="my-propositions"> 
                        <div class="left-side-profil-proposition">
                            <div class="proposition-logo-cadre">
                            <a >  <img class="proposition-logo" src="${propoPic}" alt="profil-picture"></a>
                            </div>
                            <div class="proposition-title">
                            <a  class="friend-name">${propoAuthor}</a>
                                <p class="new-in-insta">Neu auf Instaclone</p>
                            </div>
                        </div>
                        <div class="right-side-profil-proposition">
                        <div  id='follow-folgen${f}'> <a onclick="followChangeButton(${f})"   class="follow-anker" >Folgen</a>  </div>   
                        </div>
                        
                    </div>
        
        `
}

// Changes follow button
function followChangeButton(f) {
    let follow = document.getElementById(`follow-folgen${f}`);
    follow.innerHTML = `<a onclick="requestChangeButton(${f})"   class="request-anker" >Angefragt</a>`;
}

// Changes request button
function requestChangeButton(f) {
    let follow = document.getElementById(`follow-folgen${f}`);
    follow.innerHTML = `<a onclick="followChangeButton(${f})"   class="follow-anker" >Folgen</a>`;
}

// Changes save button
function saveChangeButton(i) {
    let saveButton = document.getElementById(`save-button${i}`);
    saveButton.innerHTML = `<a onclick="unsaveChangeButton(${i})" > <img class="like-icons-save-black" src="./save-black.png" alt="saved-icon"></a>`;

}

// Changes unsave button
function unsaveChangeButton(i) {
    let saveButton = document.getElementById(`save-button${i}`);
    saveButton.innerHTML = `<a onclick="saveChangeButton(${i})" > <img class="like-icons-save-black" src="./save-white.png" alt="saved-icon"></a>`;

}

// displays array Comments from array Posts in body
function renderComment() {
    let commentContain = document.getElementById(`comment${i}`);
    let commentAsText = localStorage.getItem(`comments${i}`);
    if (commentAsText) {
        comment = JSON.parse(commentAsText);
    }
    else {
        const postComment = posts[i];
        comment = postComment['comments'];
    }
    for (let j = 0; j < comment.length; j++) {
        let commentText = comment[j];
        commentContain.innerHTML += `<div class="comment-container"> <a ><b>Anonyme </b></a> ${commentText}</div>`;
    }
}

// Adds a comment in post
function addComment(i) {
    loadCommentsFromLocalStorage(i);
    const postComment = posts[i];
    let comment = postComment['comments'];
    let inputComment = document.getElementById(`inputComment${i}`);
    if (inputComment.value == '') { alert("Bitte dein Kommentar aufschreiben !!"); }
    else {
        comment.push(inputComment.value);
        saveComments(i);
        render();
    }
}

// save comments array in local storage 
function saveComments(i) {
    let postComment = posts[i];
    let comment = postComment['comments'];
    let commentAsText = JSON.stringify(comment);
    localStorage.setItem(`comments${i}`, commentAsText);
}

// load comments array from local storage in body
function loadCommentsFromLocalStorage(i) {
    let commentAsText = localStorage.getItem(`comments${i}`);
    if (commentAsText) {
        let postComment = posts[i];
        postComment['comments'] = JSON.parse(commentAsText);
    }
}

// displays array likes from array Posts in body
function renderLikes() {
    loadlikesFromLocalStorage(i);
    let post = posts[i];
    let postLike = post['likes'];
    let likeContain = document.getElementById(`likeContaier${i}`);
    let likeIconContainer = document.getElementById(`like-icon${i}`);
    let likeAsText = localStorage.getItem(`likes${i}`);
    if (likeAsText) { likeElement = JSON.parse(likeAsText); }
    else { likeElement = post['isLiked']; }
    if (likeElement == true) {
        likeIconContainer.innerHTML = ` <a onclick="dislike(${i})" > <img  class="like-icons-red-heart" src="./like-red.png" alt="like-icon" ></a>`;
        likeContain.innerHTML = `<p><b>Gefällt ${postLike + 1} Mal</b></p>`;
    }
    else {
        likeIconContainer.innerHTML = ` <a onclick="onLike(${i})" > <img  class="like-icons" src="./like-white.png" alt="like-icon" >`;
        likeContain.innerHTML = `<p><b>Gefällt ${postLike} Mal</b></p>`;
    }
}

// Dislikes a post in body 
function dislike(i) {
    loadlikesFromLocalStorage(i);
    const post = posts[i];
    post['isLiked'] = false;
    savelikes(i);
    let postLike = post['likes'];
    let likeContain = document.getElementById(`likeContaier${i}`);
    likeContain.innerHTML = `<p><b>Gefällt ${postLike} Mal</b></p>`;
    let likeIconContainer = document.getElementById(`like-icon${i}`);
    likeIconContainer.innerHTML = ` <a onclick="onLike(${i})" > <img  class="like-icons" src="./like-white.png" alt="like-icon" >`;
    renderLikes();
}

// Likes a post in body 
function onLike(i) {
    loadlikesFromLocalStorage(i);
    const post = posts[i];
    post['isLiked'] = true;
    let postLike = post['likes'];
    let likeContain = document.getElementById(`likeContaier${i}`);
    likeContain.innerHTML = `<p><b>Gefällt ${postLike + 1} Mal</b></p>`;
    let likeIconContainer = document.getElementById(`like-icon${i}`);
    likeIconContainer.innerHTML = ` <a onclick="dislike(${i})" > <img  class="like-icons-red-heart" src="./like-red.png" alt="like-icon" ></a>`;
    savelikes(i);
    renderLikes();
}

// save likes array in local storage 
function savelikes(i) {
    let postlike = posts[i];
    let likeElement = postlike['isLiked'];
    let likeAsText = JSON.stringify(likeElement);
    localStorage.setItem(`likes${i}`, likeAsText);
}

// load likes array from local storage in body
function loadlikesFromLocalStorage(i) {
    let likeAsText = localStorage.getItem(`likes${i}`);
    if (likeAsText) {
        likeElement = JSON.parse(likeAsText);
    }
}

// displays a post from body
function deletePost(i) {
    let cardPost = document.getElementById(`card-post${i}`);
    if (confirm("Sind Sie sicher , dass Sie diesen Post löschen möchten ?") == true) {
        cardPost.classList.add("d-none");
        return true;
    } else {
        return false;
    }
}

// displays button "Posten" when u write something
function PostCommentActiv(i) {
    let inputComment = document.getElementById(`inputComment${i}`);
    let postCommentButton = document.getElementById(`posten-button${i}`);

    if (inputComment.value.length == 0) {
        postCommentButton.classList.add("d-none");
    }
    else {
        postCommentButton.classList.remove("d-none");
    }
}

function enterKeyCommentPost (i){
    let inputComment = document.getElementById(`inputComment${i}`);
    let postCommentButton = document.getElementById(`posten-button${i}`);
    inputComment.addEventListener("keypress", function (event) {
        if (event.key === "Enter") {
            event.preventDefault(i);
            postCommentButton.click(i);
        }
    });
}